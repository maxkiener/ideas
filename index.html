<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Building On Our Ideas</title>
    <!-- You can add additional meta tags, styles, or scripts here -->
    <style>
        /* Add CSS styles here */

        body {
            font-family: Arial, sans-serif;
            /*background-color: #f0f0f0;*/
            margin: 0;
            padding: 0;
        }
        .container {
            text-align: left;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            max-width: 100%;
            width: 700px;
            margin: 0 auto;
            padding: 40px;
            background-color: #fff;
            border-radius: 10px;
            /* box-shadow: 0 0 10px rgba(0, 0, 0, 0.2); */
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }

        h1 {
            font-size: 36px;
            color: #333;
        }
        p {
            font-size: 18px;
            color: #666;
            font-family: serif;
            line-height: 140%;
        }
        .component {
            background-color: #f0f0f0; /* Light-grey background */
            border-radius: 10px; /* Rounded corners */
            padding: 20px;
            margin: 20px 0;
        }
        h1 {
            font-size: 36px;
            color: #333;
        }
        p {
            font-size: 18px;
            color: #666;
        }
        /* Additional CSS styles for the button */
        button {
            /*background-color: #007bff;*/
            color: #fff;
            font-size: 18px;
            /*border: none;
            border-radius: 5px;  Rounded corners for buttons */
            padding: 10px 20px;
            cursor: pointer;
            margin-right: 10px;
            border: 2px solid lightgrey;
            border-radius: 32px;
            background-color: white;
        }

        .button-container {
            display: flex;
            justify-content: center; /* Center the button horizontally */
            margin-top: 20px; /* Add margin to separate from components */
        }
    </style>
</head>
<body>
    <div class="container">

        <!-- Further ideas/todos: 
            draw architecture chart of flow how to suggest an improvement and see other proposals: fetch from firebase list of ideas, create components from list of ideas
            Title images for ideas from dall.e
            hook up to firebase backend
            introduce comments
            show details for an idea 
            suggest an improvement
            show rejected improvements with reason why they were rejected 
            add fillgraderstiege - gem√ºsegrill as another example idea.   
        -->
        <!-- Container for new components -->
        <div id="componentContainer">
            <h1>Workshopping Ideas</h1>
            <p>
                This page wants to become a Github for ideas. In the first stage I'll throw some ideas out there and want your feedback on how to improve them. You can vote on them, or - even better - suggest specific improvements.<br>
                I'll get notified when you submit an improvement and can then approve it or reject it.<br>
                I also want to improve and develop this site itself. Please submit your suggestions about how to make the page better in idea #5.  
            </p>
            <br>


            <div class="component">
                <h2>Carnevour Licence</h2>
                <p>Introduce a "driving licence" for meat eating. Nothing wrong with eating meat. But if you do, you should be willing to kill an animal (which is what you are delegating when eating meat). <br> 
                    At age 15-20 people who want to eat meat should get a "meat licence", by killing an animal of their choice (pig, fish, chicken).</p>
                <button class="good-button">üëç</button>
                <button class="bad-button">üëé</button>
            </div>

            <div class="component">
                <h2>Limit Excessive Packaging</h2>
                <p>The packaging of a product should not be allowed to be heavier than the product itself (eg. this is most bizarre with perfume)</p>
                <button class="good-button">üëç</button>
                <button class="bad-button">üëé</button>
            </div>

            <div class="component">
                <h2>Teacher Bonusses</h2>
                <p>Teacher's would get bonus payments, based on their students performance in later life. Eg. if a student reports a certain level of happiness after their first 5 years of professional life, 1% of their tax will be shared among the teachers they have had in school.</p>
                <button class="good-button">üëç</button>
                <button class="bad-button">üëé</button>
            </div>

            <div class="component">
                <h2>Abolishing Inheritance</h2>
                <p>Where you are born and which parents you are born to is a lottery. So why is it just, that some people will be given large amounts of money while others stay poor. </br> The 5 richest families of Florence in 1470 are still the richest today. <br>Let people make as much money as they can within their lifetime, but give everything back at death and use it in education, science and research</p>
                <button class="good-button">üëç</button>
                <button class="bad-button">üëé</button>
            </div>

            <div class="component">
                <h2>This Website</h2>
                <p>This page should become a tool that groups like colleagues at work, parents of a kindergarden group, or even local governments can use to gather feedback about their ideas how to improve their communities. In its current form the originator of an idea can gather feedback and accept improvements or reject them until an idea is refined enough for them.</p>
                <button class="good-button">üëç</button>
                <button class="bad-button">üëé</button>
            </div>

            <!-- Newly created components will be added here -->
            
            <div class="button-container">
                <button id="addComponent">+</button>
            </div>
            
    </div>
    

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-analytics.js";
        import firebase from "firebase/compat/app";
        // Required for side-effects
        import "firebase/firestore";
        // https://firebase.google.com/docs/web/setup#available-libraries
      
        // Your web app's Firebase configuration
        // For Firebase JS SDK v7.20.0 and later, measurementId is optional
        const firebaseConfig = {
          apiKey: "AIzaSyCA-BOnEqEhsCJYmmCtgxQVJg2jP4PayY8",
          authDomain: "ideas-9f911.firebaseapp.com",
          projectId: "ideas-9f911",
          storageBucket: "ideas-9f911.appspot.com",
          messagingSenderId: "1088350860366",
          appId: "1:1088350860366:web:dbd89a06181e32d7fbbf1f",
          measurementId: "G-0NMLE044FL"
        };
      
        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app);
        const db = firebase.firestore();
    </script>
    
    <script>
        // Function to create a new component
        function createComponent() {
            // Create a new component element (a div)
            const newComponent = document.createElement("div");
            newComponent.classList.add("component");

            // Create a headline (h2)
            const headline = document.createElement("h2");
            headline.textContent = "Component Headline";

            // Create body text (p)
            const bodyText = document.createElement("p");
            bodyText.textContent = "This is the body text of the component.";

            // Create "good" button
            const goodButton = document.createElement("button");
            goodButton.innerHTML = "üëç";
            goodButton.classList.add("good-button");

            // Create "bad" button
            const badButton = document.createElement("button");
            badButton.innerHTML = "üëé";
            badButton.classList.add("bad-button");

            // Append elements to the new component
            newComponent.appendChild(headline);
            newComponent.appendChild(bodyText);
            newComponent.appendChild(goodButton);
            newComponent.appendChild(badButton);

            // Get the container and the button container
            const componentContainer = document.getElementById("componentContainer");
            const buttonContainer = document.querySelector(".button-container");

            // Insert the new component before the button container
            componentContainer.insertBefore(newComponent, buttonContainer);
        }

        // Event listener for the "+" button
        const addButton = document.getElementById("addComponent");
        addButton.addEventListener("click", createComponent);
    </script>

    <script>
        // Assuming you have the user ID of the current user
const currentUserId = "qApOg41YEEMmm9DgF2D6";

// Query the "users" collection to retrieve the idea IDs of the current user
db.collection("users").doc(currentUserId).get()
  .then((userDoc) => {
    if (userDoc.exists) {
      // Retrieve the idea IDs from the user document
      const ideaIds = userDoc.data().ideas;

      // Array to store promises for fetching idea details
      const ideaPromises = [];

      // For each idea ID, query the "ideas" collection to fetch idea details
      ideas.forEach((ideaId) => {
        const ideaPromise = db.collection("ideas").doc(ideaId).get();
        ideaPromises.push(ideaPromise);
      });

      // Wait for all idea queries to complete
      return Promise.all(ideaPromises);
    } else {
      console.log("User document not found");
      return [];
    }
  })
  .then((ideaSnapshots) => {
    // Array to store idea details
    const ideas = [];

    // Iterate through idea snapshots and extract idea details
    ideaSnapshots.forEach((ideaSnapshot) => {
      if (ideaSnapshot.exists) {
        const ideaData = ideaSnapshot.data();
        ideas.push({
          id: ideaSnapshot.id,
          title: ideaData.title,
          description: ideaData.description,
          // Add other idea details as needed
        });
      }
    });

    // Use the "ideas" array to display the user's ideas on the website
    console.log("User's ideas:", ideas);
  })
  .catch((error) => {
    console.error("Error getting user's ideas:", error);
  });

    </script>
</body>
</html>